{% extends 'templates/base.html' %}

{% block header %}
<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>

  <script
  src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
  crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" integrity="sha512-aOG0c6nPNzGk+5zjwyJaoRUgCdOrfSDhmMID2u4+OIslr0GjpLKo7Xm0Ao3xmpM4T8AmIouRkqwj1nrdVsLKEQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.min.js" integrity="sha512-rMGGF4wg1R73ehtnxXBt5mbUfN9JUJwbk21KMlnLZDJh7BkPmeovBuddZCENJddHYYMkCh9hPFnPmS9sspki8g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.min.css" integrity="sha512-yVvxUQV0QESBt1SyZbNJMAwyKvFTLMyXSyBHDO4BG5t7k/Lw34tyqlSDlKIrIENIzCl+RVUNjmCPG+V/GMesRw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    section {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
      }
      .containe {
        width: 90%;
        max-width: 500px;
        margin: 0 auto;
        padding: 20px;
        box-shadow: 0px 0px 20px #00000010;
        background-color: white;
        border-radius: 8px;
        margin-bottom: 20px;
      }
      .form-group {
        width: 100%;
        margin-top: 20px;
        font-size: 20px;
      }
      .form-group input,
      .form-group textarea,
      .form-group select {
        width: 100%;
        height: 20px;
        padding: 5px;
        font-size: 18px;
        border: 1px solid rgba(128, 128, 128, 0.199);
        margin-top: 5px;
      }
      
      #massage {
        resize: vertical;
        height: 3em;
      }
      .submit_button {
        width: 100%;
        border: none;
        outline: none;
        padding: 20px;
        font-size: 24px;
        border-radius: 8px;
        font-family: "Montserrat";
        color: black;
        text-align: center;
        cursor: pointer;
        margin-top: 10px;
        background-color: #16A085;
        transition: 0.3s ease background-color;
      }
      .submit_button_small {
        width: 100%;
        border: none;
        outline: none;
        padding: 5px;
        font-size: 24px;
        border-radius: 8px;
        font-family: "Montserrat";
        color: black;
        text-align: center;
        cursor: pointer;
        margin-top: 10px;
        background-color: #16A085;
        transition: 0.3s ease background-color;
      }
      #submit_button:hover {
        background-color: rgb(214, 226, 236);
      }
      #status {
        width: 90%;
        max-width: 500px;
        text-align: center;
        padding: 10px;
        margin: 0 auto;
        border-radius: 8px;
      }
      #status.success {
        background-color: rgb(211, 250, 153);
        animation: status 4s ease forwards;
      }
      #status.error {
        background-color: rgb(250, 129, 92);
        color: white;
        animation: status 4s ease forwards;
      }
      @keyframes status {
        0% {
          opacity: 1;
          pointer-events: all;
        }
        90% {
          opacity: 1;
          pointer-events: all;
        }
        100% {
          opacity: 0;
          pointer-events: none;
        }
      }
    
    
      .content-table {
        border-collapse: collapse;
        margin: 25px auto;
        font-size: 0.9em;
        min-width: 400px;
        border-radius: 5px 5px 0 0;
        overflow: hidden;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
      }
      
      .content-table thead tr {
        background-color: #009879;
        color: #ffffff;
        text-align: left;
        font-weight: bold;
      }
      
      .content-table th,
      .content-table td {
        padding: 12px 15px;
      }
      
      .content-table tbody tr {
        border-bottom: 1px solid #dddddd;
      }
      
      .content-table tbody tr:nth-of-type(even) {
        background-color: #f3f3f3;
      }
      
      .content-table tbody tr:last-of-type {
        border-bottom: 2px solid #009879;
      }
      
      .content-table tbody tr.active-row {
        font-weight: bold;
        color: #009879;
      }
        padding: 0px;
    margin: 0;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
}

table {
    align:center;  
    border-collapse: collapse;
    width: 100%;
    height: 200px;
    border: 1px solid #bdc3c7;
    box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.2), -1px -1px 8px rgba(0, 0, 0, 0.2);
}

tr {
    transition: all .2s ease-in;
    cursor: pointer;
}

th,
td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

#header {
    background-color: #16a085;
    color: #fff;
}

h1 {
    font-weight: 600;
    text-align: center;
    background-color: #16a085;
    color: #fff;
    padding: 10px 0px;
}



@media only screen and (max-width: 768px) {
    table {
        width: 90%;
    }
}

      
.order_table {
    align:center;  
    border-collapse: collapse;
    width: 100%;
    height: 200px;
    border: 1px solid #bdc3c7;
    box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.2), -1px -1px 8px rgba(0, 0, 0, 0.2);
}

.order_table tr {
    transition: all .2s ease-in;
    cursor: pointer;
}

.order_table th,
.order_table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

#header {
    background-color: #16a085;
    color: #fff;
}

#order_heading {
    font-weight: 600;
    text-align: center;
    background-color: #16a085;
    color: #fff;
    padding: 10px 0px;
}

.order_table tbody tr:hover {
    background-color: #f5f5f5;
    transform: scale(1.02);
    box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.2), -1px -1px 8px rgba(0, 0, 0, 0.2);
}

@media only screen and (max-width: 768px) {
    table {
        width: 90%;
    }
}   

  </style>
{% endblock header %}

{% block body %}
<h1 style="margin: 5px auto;">Custoemr Details</h1>
{% if customer %}
<table class="content-table">
    <thead>
        <tr>
            <td>Name</td>
            <td>{{customer.name}}</td>
          </tr>
    </thead>
    <tbody>
      <tr class="active-row">
        <td>Reseller</td>
        <td>
            {% if order.is_dr%}
            Yes
            {% else %}
            No
            {% endif %}
        </td>
      </tr>
      <tr>
        <td>Phone 1</td>
        <td>{{customer.phone_number1}}</td>
      </tr>
      {% if customer.phone_number2 %}
      <tr>
        <td>Phone 2</td>
        <td>{{customer.phone_number2}}</td>
      </tr>
      {% endif %}

      {% if customer.phone_number3 %}
      <tr>
        <td>Phone 3</td>
        <td>{{customer.phone_number3}}</td>
      </tr>
      {% endif %}
      <tr>
        <td>Email</td>
        <td>{{customer.email}}</td>
      </tr>
      <tr>
        <td>Balance</td>
        <td>{{customer.balance}}</td>
      </tr>
    </tbody>
  </table>

<h2>Orders by {{customer}}</h2>
{% if customer_orders %}
<table class="order_table">
    <thead>
        <tr id="header">
            <th>Medicine</th>
            <th>Quantity</th>
            <th>Payment</th>
            <th>Dilevery</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody>
        {% for order in customer_orders %}
        <tr  onclick="window.location.href='http://localhost:8000/store/order_details/{{order.id}}';">
            <th>{{order.medicine}}</th>
            <th>{{order.quantity}}</th>
            <th>
                {% if order.payment_done %}
                completed
                {% else %}
                pending
                {% endif %}
            </th>
            <th>
                {% if order.delivery_done %}
                completed
                {% else %}
                pending
                {% endif %}
            </th>
            <th>{{order.date}}</th>
        </tr>
        {% endfor %}
    </tbody>
    

</table>
{% else %}
<p>No orders to show.</p>
{% endif %}


{% else %}
<p>Request Custoemr does not exist.</p>
{% endif %}

{% endblock body %}

{% block scripts %}
<script type="text/javascript">
    $(".chosen").chosen();

</script>

{% endblock scripts %}